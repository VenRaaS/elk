PUT http://$HOSTNAME:9200/_template/template_hermes/

{  
    "template":"*_hermes",
    "mappings":{  
        "_default_":{  
            "_all":{  
                "enabled":false
            },
            "dynamic_templates":[  
                {  
                    "str_default":{  
                        "match":"*_s",
                        "match_mapping_type":"string",
                        "mapping":{
                            "type":"string",
                            "index":"analyzed"
                        }
                    }
                },
                {  
                    "str_na":{  
                        "match":"*",
                        "match_mapping_type":"string",
                        "mapping":{  
                            "type":"string",
                            "index":"not_analyzed"
                        }
                    }
                }
            ]
        },

        "conf":{
            "properties":{
            	"traffic_pct_normal":{
                    "type":"double"
                },
                "routing_reset_interval":{
                    "type":"string",
                    "index":"not_analyzed"
                },
                "update_dt":{
                    "type":"date",
                    "format":"yyyy-MM-dd HH:mm:ss || dateOptionalTime"
                }
            }
        },

	"param2recomder":{
            "properties":{
            	"rec_pos":{
                    "type":"string",
                    "index":"not_analyzed"
                },
        	"rec_type":{
                    "type":"string",
                    "index":"not_analyzed"
                },
        	"rec_code":{
                    "type":"string",
                    "index":"not_analyzed"
                },
        	"group_key":{
                    "type":"string",
                    "index":"not_analyzed"
                },
        	"traffic_type":{
                    "type":"string",
                    "index":"not_analyzed"
                },
        	"traffic_pct":{
                    "type":"double"
                },
        	"api_url":{
                    "type":"string",
                    "index":"not_analyzed"
                },
                "keys2recomder":{
                    "type":"string"
                },
                "output_params":{
                    "type":"string"
                },
                "update_dt":{
                    "type":"date",
                    "format":"yyyy-MM-dd HH:mm:ss || dateOptionalTime"
                }
            }
        }
    }
}

