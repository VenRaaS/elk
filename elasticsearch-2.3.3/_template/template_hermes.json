PUT http://$HOSTNAME:9200/_template/template_hermes/

{  
    "template":"*_hermes",
    "settings":{
        "index":{
            "number_of_shards":"1",
            "auto_expand_replicas":"0-all"            
        }
    },	
    "mappings":{  
        "_default_":{  
            "_all":{  
                "enabled":false
            },
            "_ttl":{
                "enabled":false
            },
            "dynamic_templates":[  
                {  
                    "str_default":{  
                        "match":"*_s",
                        "match_mapping_type":"string",
                        "mapping":{
                            "type":"string",
                            "index":"analyzed",
                            "ignore_above": 256
                        }
                    }
                },
                {  
                    "str_na":{  
                        "match":"*",
                        "match_mapping_type":"string",
                        "mapping":{  
                            "type":"string",
                            "index":"not_analyzed",
                            "ignore_above": 256
                        }
                    }
                }
            ]
        },

        "conf":{
            "properties":{
            	"traffic_pct_normal":{
                    "type":"double"
                },
                "http_forward_headers": {
                    "type": "string",
                    "index": "not_analyzed",
                    "ignore_above": 256
                },
                "routing_reset_interval":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "update_dt":{
                    "type":"date",
                    "format":"yyyy-MM-dd HH:mm:ss || dateOptionalTime"
                }
            }
        },

	"param2recomder":{
            "properties":{
            	"rec_pos":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "rec_type":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "rec_code":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "rec_logic":{
                    "type":"object",                        
                    "enabled":false
		},
                "group_key":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "traffic_type":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256			
                },
                "traffic_pct":{
                    "type":"double"
                },
                "api_url":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "in_keys2recomder":{
                    "type":"string"
                },
                "out_aux_params":{
                    "type":"string"
                },
                "availability":{
                    "type":"integer"
                },
                "update_dt":{
                    "type":"date",
                    "format":"yyyy-MM-dd HH:mm:ss || dateOptionalTime"
                }
            }
        },
        
        "jumper": {
            "_ttl": {
                "enabled": true,
                "default": "30m"
            },
            "properties":{
                "uid":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "group_key":{
                    "type":"string",
                    "index":"not_analyzed",
                    "ignore_above": 256
                },
                "update_dt":{
                    "type":"date",
                    "format":"yyyy-MM-dd HH:mm:ss || dateOptionalTime"
                }
	    }
        }
    }
}

